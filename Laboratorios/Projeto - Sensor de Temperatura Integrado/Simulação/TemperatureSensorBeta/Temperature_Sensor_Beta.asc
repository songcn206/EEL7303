Version 4
SHEET 1 4048 2092
WIRE -192 -64 -240 -64
WIRE -1344 -32 -1472 -32
WIRE -1216 -32 -1344 -32
WIRE -192 -32 -192 -64
WIRE 224 -32 192 -32
WIRE 224 -16 192 -16
WIRE 752 -16 720 -16
WIRE -1472 0 -1472 -32
WIRE -1216 0 -1216 -32
WIRE 224 0 192 0
WIRE 224 16 192 16
WIRE 752 16 720 16
WIRE -2448 32 -2480 32
WIRE 224 32 192 32
WIRE 1328 32 1328 16
WIRE 1520 32 1520 16
WIRE -2320 48 -2384 48
WIRE -2448 64 -2480 64
WIRE -1344 64 -1344 -32
WIRE -768 96 -768 80
WIRE -192 96 -192 48
WIRE -192 96 -240 96
WIRE -816 112 -848 112
WIRE 224 128 192 128
WIRE 224 144 192 144
WIRE 720 144 688 144
WIRE -2480 160 -2480 64
WIRE -2416 160 -2480 160
WIRE -2320 160 -2320 48
WIRE -2320 160 -2336 160
WIRE -2240 160 -2320 160
WIRE -2112 160 -2160 160
WIRE -2080 160 -2112 160
WIRE -1904 160 -2000 160
WIRE -1472 160 -1472 80
WIRE -1360 160 -1360 128
WIRE -1360 160 -1472 160
WIRE -1328 160 -1328 128
WIRE -1216 160 -1216 80
WIRE -1216 160 -1328 160
WIRE -384 160 -432 160
WIRE 224 160 192 160
WIRE -2480 176 -2480 160
WIRE 224 176 192 176
WIRE 720 176 688 176
WIRE 224 192 192 192
WIRE -1216 208 -1216 160
WIRE -816 224 -816 160
WIRE -816 224 -848 224
WIRE -768 224 -768 176
WIRE -704 224 -768 224
WIRE -560 224 -704 224
WIRE -432 224 -432 160
WIRE -432 224 -480 224
WIRE -400 224 -432 224
WIRE -240 224 -336 224
WIRE -208 224 -240 224
WIRE -2112 240 -2112 160
WIRE -2016 240 -2112 240
WIRE -1904 256 -1904 160
WIRE -1904 256 -1952 256
WIRE -1872 256 -1904 256
WIRE -2480 272 -2480 256
WIRE -2416 272 -2480 272
WIRE -2320 272 -2336 272
WIRE -2240 272 -2320 272
WIRE -2112 272 -2160 272
WIRE -2016 272 -2112 272
WIRE -768 272 -768 224
WIRE 688 272 576 272
WIRE -2112 288 -2112 272
WIRE -816 288 -816 224
WIRE -1472 304 -1472 160
WIRE -1376 304 -1472 304
WIRE -1216 304 -1216 288
WIRE -1216 304 -1312 304
WIRE -432 320 -432 224
WIRE -352 320 -432 320
WIRE 576 320 576 272
WIRE 1520 320 1520 304
WIRE -1472 336 -1472 304
WIRE -1216 336 -1216 304
WIRE -816 336 -848 336
WIRE -240 336 -240 224
WIRE -240 336 -288 336
WIRE 864 336 832 336
WIRE 960 336 928 336
WIRE -352 352 -384 352
WIRE 320 352 304 352
WIRE -2480 368 -2480 272
WIRE -2448 368 -2480 368
WIRE -768 368 -768 352
WIRE -384 368 -384 352
WIRE 320 368 320 352
WIRE 352 368 320 368
WIRE 496 368 416 368
WIRE 688 368 688 272
WIRE 688 368 656 368
WIRE 864 368 688 368
WIRE -2320 384 -2320 272
WIRE -2320 384 -2384 384
WIRE -1376 384 -1376 304
WIRE -1376 384 -1408 384
WIRE -1312 384 -1312 304
WIRE -1280 384 -1312 384
WIRE -2448 400 -2480 400
WIRE -2112 400 -2112 368
WIRE 352 400 320 400
WIRE -240 416 -240 336
WIRE -208 416 -240 416
WIRE 320 416 320 400
WIRE 320 416 304 416
WIRE 496 416 480 416
WIRE 720 416 672 416
WIRE -208 448 -208 432
WIRE -1472 464 -1472 432
WIRE -1216 464 -1216 432
WIRE -2448 592 -2480 592
WIRE -2320 608 -2384 608
WIRE -2448 624 -2480 624
WIRE -2480 720 -2480 624
WIRE -2416 720 -2480 720
WIRE -2320 720 -2320 608
WIRE -2320 720 -2336 720
WIRE -2240 720 -2320 720
WIRE -2112 720 -2160 720
WIRE -2080 720 -2112 720
WIRE -1904 720 -2000 720
WIRE 1328 720 1328 688
WIRE -2480 736 -2480 720
WIRE -2112 800 -2112 720
WIRE -2016 800 -2112 800
WIRE -1904 816 -1904 720
WIRE -1904 816 -1952 816
WIRE -1872 816 -1904 816
WIRE -2480 832 -2480 816
WIRE -2416 832 -2480 832
WIRE -2320 832 -2336 832
WIRE -2240 832 -2320 832
WIRE -2112 832 -2160 832
WIRE -2016 832 -2112 832
WIRE -1392 832 -1520 832
WIRE -1136 832 -1392 832
WIRE -880 832 -1136 832
WIRE -624 832 -880 832
WIRE -368 832 -624 832
WIRE -112 832 -368 832
WIRE 144 832 -112 832
WIRE 400 832 144 832
WIRE 656 832 400 832
WIRE 912 832 656 832
WIRE -2112 848 -2112 832
WIRE -1280 864 -1280 800
WIRE -1280 864 -1504 864
WIRE -1024 864 -1024 800
WIRE -1024 864 -1248 864
WIRE -768 864 -768 800
WIRE -768 864 -992 864
WIRE -512 864 -512 800
WIRE -512 864 -736 864
WIRE -256 864 -256 800
WIRE -256 864 -480 864
WIRE 0 864 0 800
WIRE 0 864 -224 864
WIRE 256 864 256 800
WIRE 256 864 32 864
WIRE 512 864 512 800
WIRE 512 864 288 864
WIRE 768 864 768 800
WIRE 768 864 544 864
WIRE 1024 864 1024 800
WIRE 1024 864 800 864
WIRE -1392 896 -1392 832
WIRE -1136 896 -1136 832
WIRE -880 896 -880 832
WIRE -624 896 -624 832
WIRE -368 896 -368 832
WIRE -112 896 -112 832
WIRE 144 896 144 832
WIRE 400 896 400 832
WIRE 656 896 656 832
WIRE 912 896 912 832
WIRE -2480 928 -2480 832
WIRE -2448 928 -2480 928
WIRE -2320 944 -2320 832
WIRE -2320 944 -2384 944
WIRE -1504 944 -1504 864
WIRE -1472 944 -1504 944
WIRE -1264 944 -1312 944
WIRE -1248 944 -1248 864
WIRE -1216 944 -1248 944
WIRE -1008 944 -1056 944
WIRE -992 944 -992 864
WIRE -960 944 -992 944
WIRE -752 944 -800 944
WIRE -736 944 -736 864
WIRE -704 944 -736 944
WIRE -496 944 -544 944
WIRE -480 944 -480 864
WIRE -448 944 -480 944
WIRE -240 944 -288 944
WIRE -224 944 -224 864
WIRE -192 944 -224 944
WIRE 16 944 -32 944
WIRE 32 944 32 864
WIRE 64 944 32 944
WIRE 272 944 224 944
WIRE 288 944 288 864
WIRE 320 944 288 944
WIRE 528 944 480 944
WIRE 544 944 544 864
WIRE 576 944 544 944
WIRE 784 944 736 944
WIRE 800 944 800 864
WIRE 832 944 800 944
WIRE -2448 960 -2480 960
WIRE -2112 960 -2112 928
WIRE -1472 992 -1520 992
WIRE -1280 992 -1280 864
WIRE -1280 992 -1296 992
WIRE -1264 992 -1264 944
WIRE -1216 992 -1264 992
WIRE -1024 992 -1024 864
WIRE -1024 992 -1040 992
WIRE -1008 992 -1008 944
WIRE -960 992 -1008 992
WIRE -768 992 -768 864
WIRE -768 992 -784 992
WIRE -752 992 -752 944
WIRE -704 992 -752 992
WIRE -512 992 -512 864
WIRE -512 992 -528 992
WIRE -496 992 -496 944
WIRE -448 992 -496 992
WIRE -256 992 -256 864
WIRE -256 992 -272 992
WIRE -240 992 -240 944
WIRE -192 992 -240 992
WIRE 0 992 0 864
WIRE 0 992 -16 992
WIRE 16 992 16 944
WIRE 64 992 16 992
WIRE 256 992 256 864
WIRE 256 992 240 992
WIRE 272 992 272 944
WIRE 320 992 272 992
WIRE 512 992 512 864
WIRE 512 992 496 992
WIRE 528 992 528 944
WIRE 576 992 528 992
WIRE 768 992 768 864
WIRE 768 992 752 992
WIRE 784 992 784 944
WIRE 832 992 784 992
WIRE 1024 992 1024 864
WIRE 1024 992 1008 992
WIRE -1392 1072 -1392 1040
WIRE -1392 1072 -1520 1072
WIRE -1136 1072 -1136 1040
WIRE -1136 1072 -1392 1072
WIRE -880 1072 -880 1040
WIRE -880 1072 -1136 1072
WIRE -624 1072 -624 1040
WIRE -624 1072 -880 1072
WIRE -368 1072 -368 1040
WIRE -368 1072 -624 1072
WIRE -112 1072 -112 1040
WIRE -112 1072 -368 1072
WIRE 144 1072 144 1040
WIRE 144 1072 -112 1072
WIRE 400 1072 400 1040
WIRE 400 1072 144 1072
WIRE 656 1072 656 1040
WIRE 656 1072 400 1072
WIRE 912 1072 912 1040
WIRE 912 1072 656 1072
FLAG -320 304 +VCC
FLAG -320 368 -VCC
FLAG -208 448 0
FLAG 1328 112 0
FLAG 1328 16 +VCC
FLAG 1520 112 0
FLAG 1520 16 -VCC
FLAG -240 336 INT_OUT
FLAG -144 416 COMP_OUT
FLAG -704 224 VSW
FLAG 1520 400 0
FLAG 1520 304 CLK
FLAG -1520 1072 0
FLAG -1280 800 BIT0
FLAG -1024 800 BIT1
FLAG -768 800 BIT2
FLAG -512 800 BIT3
FLAG -1520 832 0
FLAG 192 -32 BIT0
FLAG 192 -16 BIT1
FLAG 192 0 BIT2
FLAG 192 16 BIT3
FLAG 288 -16 AND_AUX_1
FLAG -256 800 BIT4
FLAG 0 800 BIT5
FLAG 256 800 BIT6
FLAG 512 800 BIT7
FLAG 688 144 COMP_OUT
FLAG 688 176 CLK
FLAG 784 144 COUNT_IN
FLAG 192 128 BIT5
FLAG 192 144 BIT6
FLAG 192 160 BIT7
FLAG 192 176 BIT8
FLAG 288 144 AND_AUX_2
FLAG 720 -16 AND_AUX_1
FLAG 720 16 AND_AUX_2
FLAG 816 -16 CTRL_IN
FLAG 576 464 0
FLAG 720 416 CTRL_PTAT
FLAG 480 416 CLK
FLAG 1328 800 0
FLAG 304 352 CTRL_IN
FLAG -1520 992 COUNT_IN
FLAG -848 112 CTRL_PTAT
FLAG 832 336 COMP_OUT
FLAG 960 336 CTRL_REF
FLAG 192 32 BIT4
FLAG 768 800 BIT8
FLAG 1024 800 BIT9
FLAG 192 192 BIT9
FLAG -1472 464 0
FLAG -1216 464 0
FLAG -1312 96 +VCC
FLAG -1376 96 -VCC
FLAG -1344 -32 VREF
FLAG -1216 160 PTAT+
FLAG -1216 304 PTAT-
FLAG -1472 304 CTAT
FLAG -1984 224 +VCC
FLAG -1984 288 -VCC
FLAG -2112 400 0
FLAG -1872 256 BG_PTAT
FLAG -2480 32 PTAT+
FLAG -2480 400 PTAT-
FLAG -768 80 BG_PTAT
FLAG -2480 960 VREF
FLAG -2416 416 -VCC
FLAG -2416 16 -VCC
FLAG -2416 80 +VCC
FLAG -2416 352 +VCC
FLAG -2480 592 0
FLAG -384 368 0
FLAG -1984 784 +VCC
FLAG -1984 848 -VCC
FLAG -2112 960 0
FLAG -1872 816 BG_REF
FLAG -2416 976 -VCC
FLAG -2416 576 -VCC
FLAG -2416 640 +VCC
FLAG -2416 912 +VCC
FLAG -768 368 BG_REF
FLAG -848 336 CTRL_REF
FLAG -848 224 0
FLAG -240 32 0
FLAG -240 -64 START_UP_1
FLAG -240 96 START_UP_2
FLAG -208 224 START_UP_2
FLAG -240 -16 CTRL_START
FLAG 1328 400 0
FLAG 1328 320 CTRL_START
FLAG -384 160 START_UP_1
FLAG 304 416 START_UP_LOCK
FLAG 1328 688 START_UP_LOCK
SYMBOL res -464 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName INT_R
SYMATTR Value 50k
SYMBOL Digital\\dflop -1392 896 R0
SYMATTR InstName FF0
SYMATTR Value2 Vhigh=3.3 Trise=10u Tfall=10u Td=5u
SYMBOL Digital\\and 256 -64 R0
SYMATTR InstName A4
SYMATTR Value2 Vhigh=3.3 Trise=100n Tfall=100n Vt=0.01
SYMBOL Digital\\schmtbuf -208 352 R0
SYMATTR InstName COMP
SYMATTR Value2 Vhigh=3.3 Trise=3m Tfall=3m Vt=0.01
SYMBOL cap -336 208 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName INT_C
SYMATTR Value 10n
SYMBOL voltage 1328 16 M0
WINDOW 3 37 41 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
WINDOW 0 37 4 Left 2
SYMATTR Value 3.3V
SYMATTR InstName INT_+VCC
SYMBOL voltage 1520 16 R0
WINDOW 3 43 47 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
WINDOW 0 39 17 Left 2
SYMATTR Value -3.3V
SYMATTR InstName INT_-VCC
SYMBOL Opamps\\UniversalOpamp2 -320 336 R0
SYMATTR InstName INT
SYMBOL Digital\\dflop -1136 896 R0
SYMATTR InstName FF1
SYMATTR Value2 Vhigh=3.3 Trise=10u Tfall=10u Td=5u
SYMBOL Digital\\dflop -880 896 R0
SYMATTR InstName FF2
SYMATTR Value2 Vhigh=3.3 Trise=10u Tfall=10u Td=5u
SYMBOL Digital\\dflop -624 896 R0
SYMATTR InstName FF3
SYMATTR Value2 Vhigh=3.3 Trise=10u Tfall=10u Td=5u
SYMBOL voltage 1520 304 R0
WINDOW 3 24 44 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR Value PULSE(0 3.3 1m 50u 50u 0.5m 1m)
SYMATTR InstName CLK
SYMBOL Digital\\dflop -368 896 R0
SYMATTR InstName FF4
SYMATTR Value2 Vhigh=3.3 Trise=10u Tfall=10u Td=5u
SYMBOL Digital\\dflop -112 896 R0
SYMATTR InstName FF5
SYMATTR Value2 Vhigh=3.3 Trise=10u Tfall=10u Td=5u
SYMBOL Digital\\dflop 144 896 R0
SYMATTR InstName FF6
SYMATTR Value2 Vhigh=3.3 Trise=10u Tfall=10u Td=5u
SYMBOL Digital\\dflop 400 896 R0
SYMATTR InstName FF7
SYMATTR Value2 Vhigh=3.3 Trise=10u Tfall=10u Td=5u
SYMBOL Digital\\and 752 96 R0
SYMATTR InstName A1
SYMATTR Value2 Vhigh=3.3 Trise=100n Tfall=100n Vt=0.01
SYMBOL Digital\\and 256 96 R0
SYMATTR InstName A2
SYMATTR Value2 Vhigh=3.3 Trise=100n Tfall=100n Vt=0.01
SYMBOL Digital\\and 784 -64 R0
SYMATTR InstName A3
SYMATTR Value2 Vhigh=3.3 Trise=100n Tfall=100n Vt=0.01
SYMBOL Digital\\dflop 576 320 R0
SYMATTR InstName FF8
SYMATTR Value2 Vhigh=3.3 Trise=10u Tfall=10u Td=5u
SYMBOL voltage 1328 704 R0
WINDOW 3 24 44 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
WINDOW 0 7 11 Left 2
SYMATTR Value PULSE(0 3.3 30m 0 0 10 10)
SYMATTR InstName START_UP_LOCK
SYMBOL Digital\\and 384 320 R0
SYMATTR InstName A8
SYMATTR Value2 Vhigh=3.3 Trise=100n Tfall=100n Vt=0.01
SYMBOL Digital\\and 896 288 R0
SYMATTR InstName A5
SYMATTR Value2 Vhigh=3.3 Trise=100n Tfall=100n Vt=0.01
SYMBOL Digital\\dflop 656 896 R0
SYMATTR InstName FF10
SYMATTR Value2 Vhigh=3.3 Trise=10u Tfall=10u Td=5u
SYMBOL Digital\\dflop 912 896 R0
SYMATTR InstName FF11
SYMATTR Value2 Vhigh=3.3 Trise=10u Tfall=10u Td=5u
SYMBOL npn -1408 336 M0
SYMATTR InstName Q1
SYMATTR Value BC547C
SYMBOL res -1456 -16 M0
SYMATTR InstName R1
SYMATTR Value 6.1k
SYMBOL res -1232 -16 R0
SYMATTR InstName R2
SYMATTR Value 61k
SYMBOL res -1232 192 R0
SYMATTR InstName R3
SYMATTR Value 6.1k
SYMBOL npn -1280 336 R0
SYMATTR InstName Q2
SYMATTR Value BC547C
SYMBOL Opamps\\UniversalOpamp2 -1344 96 M270
SYMATTR InstName INT1
SYMBOL res -1984 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 500
SYMBOL res -2144 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 50k
SYMBOL res -2144 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 50k
SYMBOL res -2128 272 R0
SYMATTR InstName R8
SYMATTR Value 500
SYMBOL res -2496 160 R0
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL Opamps\\UniversalOpamp2 -2416 48 M180
SYMATTR InstName INT3
SYMBOL Opamps\\UniversalOpamp2 -2416 384 R0
SYMATTR InstName INT5
SYMBOL Opamps\\UniversalOpamp2 -1984 256 R0
SYMATTR InstName INT2
SYMBOL res -1984 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL res -2144 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL res -2144 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 100k
SYMBOL res -2128 832 R0
SYMATTR InstName R21
SYMATTR Value 100
SYMBOL res -2320 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 5k
SYMBOL res -2496 720 R0
SYMATTR InstName R23
SYMATTR Value 50k
SYMBOL Opamps\\UniversalOpamp2 -2416 608 M180
SYMATTR InstName INT8
SYMBOL Opamps\\UniversalOpamp2 -2416 944 R0
SYMATTR InstName INT9
SYMBOL Opamps\\UniversalOpamp2 -1984 816 R0
SYMATTR InstName INT10
SYMBOL res -2320 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 5k
SYMBOL res -2320 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 5k
SYMBOL res -2320 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 5k
SYMBOL sw -768 192 M180
SYMATTR InstName SW_PTAT
SYMATTR Value IDEAL_SW
SYMBOL sw -768 256 R0
SYMATTR InstName SW_REF
SYMATTR Value IDEAL_SW
SYMBOL sw -192 64 M180
SYMATTR InstName SW_START_UP
SYMATTR Value IDEAL_SW
SYMBOL voltage 1328 304 R0
WINDOW 0 33 81 Left 2
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 1 0 1u 1u 1m 10m 1)
TEXT 872 1112 Left 2 ;10-BIT COUNTER
TEXT -512 584 Left 2 ;SWITCHS/INTEGRATOR/COMPARATOR
TEXT 904 592 Left 2 ;CONTROL UNIT
TEXT -1960 -144 Left 2 !.step temp -40 120 20
TEXT -1344 584 Left 2 ;BANDGAP CIRCUIT
TEXT -2096 1088 Left 2 ;BANDGAP/ADC INTERFACE
TEXT -1664 -248 Left 2 ;Universidade Federal de Santa Catarina - UFSC\nEngenharia Eletrônica - EEL7303 - Circuitos Eletrônicos Analógicos\nProjeto - Sensor de Temperatura\nAndré Martins Pio de Mattos - 16103374\nGustavo Simas da Silva - 16101076
TEXT -1864 -176 Left 2 !.tran 0 2 10m
TEXT -1752 -208 Left 2 !.op
TEXT -688 -248 Left 2 ;Observations:\nADC_Resolution=10bits -> T2=1024 (levels)\nT=-25°C -> T1=346; Vadc=149,4053071mV ;Vreal=151,05265mV;Vref_bandgap=442,17062mV;Er=1,09%=>0,2725°C\nT=75°C  -> T1=486; Vadc=209,4429672mV ;Vreal=211,54565mV;Vref_bandgap=441,29547mV;Er=0,99%=>0,7425°C
TEXT -936 552 Left 2 !.nodeset V(INT_OUT)=0 V(VREF)=0 V(BG_REF)=0 V(VSW)=0 V(START_UP_1) = 0
TEXT -1392 544 Left 2 !.nodeset V(CTAT)=0.05
TEXT -936 520 Left 2 !.model IDEAL_SW SW(Ron=1m Roff=100Meg Vt=0.5 Vh=0)
TEXT 1560 1120 Left 2 ;SOURCES
RECTANGLE Normal 1104 624 64 -96 2
RECTANGLE Normal -1664 1152 1104 688 2
RECTANGLE Normal -1664 -96 -1056 624 2
RECTANGLE Normal -2608 -96 -1728 1152 2
RECTANGLE Normal 32 624 -1008 -96 2
RECTANGLE Normal 1696 1152 1136 -96 2
